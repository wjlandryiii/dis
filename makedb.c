#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

#include "bytes.h"


unsigned char ok_bin[] = {
	0x68, 0x4f, 0x4b, 0x0a, 0x41, 0x31, 0xc0, 0xb0, 0x04, 0x31, 0xdb, 0x43,
	0x89, 0xe1, 0x89, 0xc2, 0x4a, 0xcd, 0x80, 0x31, 0xc0, 0x40, 0x31, 0xdb,
	0xcd, 0x80, 0xf4
};
unsigned int ok_bin_len = 27;

unsigned char helloworld_bin[] = {
	0xeb, 0x31, 0x5e, 0x89, 0xf0, 0x51, 0x89, 0xc1, 0x80, 0x39, 0x00, 0x74,
	0x05, 0x83, 0xc1, 0x01, 0xeb, 0xf6, 0x29, 0xc1, 0x89, 0xc8, 0x59, 0x89,
	0xc2, 0x89, 0xf1, 0xbb, 0x01, 0x00, 0x00, 0x00, 0xb8, 0x04, 0x00, 0x00,
	0x00, 0xcd, 0x80, 0xbb, 0x00, 0x00, 0x00, 0x00, 0xb8, 0x01, 0x00, 0x00,
	0x00, 0xcd, 0x80, 0xe8, 0xca, 0xff, 0xff, 0xff, 0x48, 0x65, 0x6c, 0x6c,
	0x6f, 0x20, 0x57, 0x6f, 0x72, 0x6c, 0x64, 0x21, 0x0a, 0x00
};
unsigned int helloworld_bin_len = 70;


int main(int argc, char *argv[]){
	struct bytes bytes;
	char *filename;
	char dbname[1024];

	if(argc < 2){
		fprintf(stderr, "%s: [filename]\n", argv[0]);
		return 1;
	} else {
		filename = argv[1];
		snprintf(dbname, sizeof(dbname), "%s.db", filename);
		create_bytes(filename, 0x08040000, &bytes);
		save_bytes(dbname, &bytes);
		return 0;
	}


fail:
	return 1;
}
